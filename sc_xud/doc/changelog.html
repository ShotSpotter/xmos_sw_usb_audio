

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>sc_xud Change Log &mdash; XMOS USB Device (XUD) Library v documentation</title>

    <link rel="stylesheet" href=".static/pygments.css" type="text/css" />
    <link rel="stylesheet" href=".static/globals.css"  type="text/css" />
    <link rel="stylesheet" href=".static/ui.css" type="text/css" />
    <link rel="stylesheet" href=".static/app.css"  type="text/css" />
    <link rel="stylesheet" href=".static/mobile.css"  type="text/css" />
    <link rel="stylesheet" href=".static/xde.css"
    type="text/css" /><script type="text/javascript" src=".static/scripts.js"></script>
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src=".static/jquery.js"></script>
    <script type="text/javascript" src=".static/underscore.js"></script>
    <script type="text/javascript" src=".static/doctools.js"></script>
    <link rel="top" title="XMOS USB Device (XUD) Library v documentation" href="index.html" />
    <link rel="prev" title="XMOS USB Device (XUD) Library" href="index.html" /> 
  </head>
  <body class="xde indented-content" onload="prepareContents();">  
          <div id="body">
             <div id="content">
             <h1>sc_xud Change Log</h1>

             <div class='columns'>
            
  <h2 class="topic" id="id1">2.6.1</h2>
<div><blockquote>
<div><ul>
<li>RESOLVED:   Transmit timing fix for U-series devices (introduced in 2.3.0)</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id2">2.6.0</h2>
<div><blockquote>
<div><ul>
<li>RESOLVED:   Issue referenced as #11813 in 2.4.2 for XS1 devices</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id3">2.5.0</h2>
<div><blockquote>
<div><ul>
<li><dl class="docutils">
<dt>RESOLVED:   xCORE-200 USB phy parameters tuned for optimal Tx performance resulting</dt>
<dd><p>in much improved TX eye diagram and compliance test results</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id4">2.4.2</h2>
<div><blockquote>
<div><ul>
<li><dl class="docutils">
<dt>CHANGE:     VBUS connection to xCORE-200 no longer required when using XUD_PWR_BUS i.e.</dt>
<dd><p>for bus-powered devices. This removes the need to any protection circuitry and
allows for a reduced BOM.
Note, VBUS should still be present for self powered devices in order to pass USB
compliance tests.</p>
</dd>
</dl>
</li>
<li><dl class="docutils">
<dt>RESOLVED:   Device might hang during resume if host follows resume signality with activity</dt>
<dd><p>after a time close to specified minimum of 1.33us (#11813)</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id5">2.4.1</h2>
<div><blockquote>
<div><ul>
<li>RESOLVED:   Initialisation failure on U-series devices</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id6">2.4.0</h2>
<div><blockquote>
<div><ul>
<li>RESOLVED:   Intermittent initialisation issues with xCORE-200</li>
<li>RESOLVED:   SETUP transaction data CRC not properly checked</li>
<li>RESOLVED:   RxError line from phy handled</li>
<li><dl class="docutils">
<dt>RESOLVED:   Isochronous IN endpoints now send an 0-length packet if not ready rather than</dt>
<dd><p>an (invalid) NAK.</p>
</dd>
</dl>
</li>
<li>RESOLVED:   Receive of short packets sometimes prematurely ended</li>
<li><dl class="docutils">
<dt>RESOLVED:   Data PID not reset to DATA0 in ClearStallByAddr() (used on ClearFeature(HALT)</dt>
<dd><p>request from host) (#17092)</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id7">2.3.2</h2>
<div><blockquote>
<div><ul>
<li><dl class="docutils">
<dt>CHANGE:     Interrupts disabled during any access to usb_tile. Allows greater reliability</dt>
<dd><p>if user suspend/resume functions enabled interrupts e.g. for role-switch</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id8">2.3.1</h2>
<div><blockquote>
<div><ul>
<li><dl class="docutils">
<dt>RESOLVED:   (Minor) XUD_ResetEpStateByAddr() could operate on corresponding OUT endpoint</dt>
<dd><p>instead of the desired IN endpoint address as passed into the function (and
vice versa). Re-introduced into 2.3.0 due to manual merge with lib_usb.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id9">2.3.0</h2>
<div><blockquote>
<div><ul>
<li>ADDED:      Support for XCORE-200 (libxud_x200.a)</li>
<li>CHANGE:     Compatibility fixes for XMOS toolset version 14 (dual-issue support etc)</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id10">2.2.4</h2>
<div><blockquote>
<div><ul>
<li><dl class="docutils">
<dt>RESOLVED:   (Minor) Potential for lock-up when waiting for USB clock on startup. This is is</dt>
<dd><p>avoided by enabling port buffering on the USB clock port. Affects L/G series only.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id11">2.2.3</h2>
<div><blockquote>
<div><ul>
<li><dl class="docutils">
<dt>RESOLVED:   (Minor) XUD_ResetEpStateByAddr() could operate on corresponding OUT endpoint</dt>
<dd><p>instead of the desired IN endpoint address as passed into the function (and
vice versa)</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id12">2.2.2</h2>
<div><blockquote>
<div><blockquote>
<div><ul>
<li>CHANGE:     Header file comment clarification only</li>
</ul>
</div></blockquote>
<ul>
<li>Changes to dependencies:<ul>
<li>sc_usb: 1.0.3rc0 -&gt; 1.0.4alpha0<ul>
<li>ADDED:      Structs for Audio Class 2.0 Mixer and Extension Units</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id13">2.2.1</h2>
<div><blockquote>
<div><ul>
<li>RESOLVED:   Slight optimisations (long jumps replaced with short) to aid inter-packet gaps.</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id14">2.2.0</h2>
<div><blockquote>
<div><ul>
<li>CHANGE:     Timer usage optimisation - usage reduced by one.</li>
<li><dl class="docutils">
<dt>CHANGE:     OTG Flags register explicitly cleared at start up - useful if previously running</dt>
<dd><p>in host mode after a soft-reboot.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id15">2.1.1</h2>
<div><blockquote>
<div><ul>
<li>ADDED:      Warning emitted when number of cores is greater than 6</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id16">2.1.0</h2>
<div><blockquote>
<div><ul>
<li><dl class="docutils">
<dt>CHANGE:     XUD no longer takes a additional chanend parameter for enabling USB test-modes.</dt>
<dd><p>Test-modes are now enabled via a XUD_SetTestMode() function using a chanend
relating to Endpoint 0. This change was made to reduce chanend usage only.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id17">2.0.1</h2>
<div><blockquote>
<div><ul>
<li><dl class="docutils">
<dt>RESOLVED:   (Minor) Error when building module_xud in xTimeComposer due to invalid project</dt>
<dd><p>files.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id18">2.0.0</h2>
<div><blockquote>
<div><blockquote>
<div><ul>
<li><dl class="docutils">
<dt>CHANGE:     All XUD functions now return XUD_Result_t. Functions that previously returned</dt>
<dd><p>a buffer length (e.g. XUD_GetBuffer) now require a length param (passed by
reference.</p>
</dd>
</dl>
</li>
<li><dl class="docutils">
<dt>CHANGE:     Endpoint ready flags are now reset on bus-reset (if XUD_STATUS_ENABLE used). This</dt>
<dd><p>means an endpoint can avoid sending/receiving stale data after a bus-reset.</p>
</dd>
</dl>
</li>
<li><dl class="docutils">
<dt>CHANGE:     Reset notifications are now longer hand-shaken back to XUD_Manager in</dt>
<dd><p>XUD_ResetEndpoint. This reduces the possibility of an Endpoint breaking timing
of USB handshake signalling through bad code. XUD functions now check reseting flag
to avoid race condition.</p>
</dd>
</dl>
</li>
<li><dl class="docutils">
<dt>CHANGE:     XUD_SetReady_In now implemented using XUD_SetReady_InPtr (previously was duplicated</dt>
<dd><p>code.</p>
</dd>
</dl>
</li>
<li>CHANGE:     XUD_ResetEndpoint now in XC. Previously was an ASM wrapper.</li>
<li><dl class="docutils">
<dt>CHANGE:     Modifications to xud.h including the use of macros from xccompat.h such that it</dt>
<dd><p>can be included from .c files.</p>
</dd>
</dl>
</li>
<li>CHANGE:     XUD_BusSpeed type renamed to XUD_BusSpeed_t in line with naming conventions</li>
<li>CHANGE:     XUD_SetData_Select now takes a reference to XUD_Result_t instead an int</li>
<li>CHANGE:     XUD_GetData_Select now takes an additional XUD_Result_t parameter by reference</li>
<li><dl class="docutils">
<dt>CHANGE:     XUD_GetData_Select now returns XUD_RES_ERR instead of a 0 length on packet error</dt>
<dd><p>(e.g. PID sequence error).</p>
</dd>
</dl>
</li>
<li>CHANGE:     XUD_SetDevAddr now returns XUD_Result_t</li>
</ul>
</div></blockquote>
<ul>
<li>Changes to dependencies:<ul>
<li>sc_usb: 1.0.2beta1 -&gt; 1.0.3rc0<ul>
<li>CHANGE:     Various descriptor structures added, particularly for Audio Class</li>
<li>CHANGE:     Added ComposeSetupBuffer() for creating a buffer from a USB_Setup_Packet_t</li>
<li>CHANGE:     Various function prototypes now using macros from xccompat.h such that then can be</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id19">1.0.3</h2>
<div><blockquote>
<div><blockquote>
<div><ul>
<li><dl class="docutils">
<dt>RESOLVED:   (Minor) ULPI data-lines driven hard low and XMOS pull-up on STP line disabled</dt>
<dd><p>before taking the USB phy out of reset. Previously the phy could clock in
erroneous data before the XMOS ULPI interface was initialised causing potential
connection issues on initial startup. This affects L/G series libraries only.</p>
</dd>
</dl>
</li>
<li><dl class="docutils">
<dt>RESOLVED:   (Minor) Fixes to improve memory usage such as adding missing resource usage</dt>
<dd><p>symbols/elimination blocks to assembly file and inlining support functions where
appropriate.</p>
</dd>
</dl>
</li>
<li><dl class="docutils">
<dt>RESOLVED:   (Minor) Moved to using supplied tools support for communicating with the USB tile</dt>
<dd><p>rather than custom implementation (affects U-series lib only).</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<ul>
<li>Changes to dependencies:<ul>
<li>sc_usb: 1.0.1beta1 -&gt; 1.0.2beta1<ul>
<li>ADDED:   USB_BMREQ_D2H_VENDOR_DEV and USB_BMREQ_D2H_VENDOR_DEV defines for vendor device requests</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id20">1.0.2</h2>
<div><blockquote>
<div><ul>
<li>ADDED:      Re-instated support for G devices (xud_g library)</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id21">1.0.1</h2>
<div><blockquote>
<div><ul>
<li>CHANGE:     Power signalling state machines simplified in order to reduce memory usage</li>
<li><dl class="docutils">
<dt>RESOLVED:   (Minor) Reduced delay before transmitting k-chirp for high-speed mode, this</dt>
<dd><p>improves high-speed handshake reliability on some hosts</p>
</dd>
</dl>
</li>
<li><dl class="docutils">
<dt>RESOLVED:   (Major) Resolved a compatibility issue with Intel USB 3.0 xHCI host</dt>
<dd><p>controllers relating to tight inter-packet timing resulting in packet loss</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div><h2 class="topic" id="id22">1.0.0</h2>
<div><blockquote>
<div><ul>
<li>Initial stand-alone release</li>
</ul>
</div></blockquote>
</div>

             </div>
             </div>


          </div>

          <div>
             <!--seealsos-->
          </div>
    <div class="footer">
    </div>
  </body>
</html>