(function(){var u=this,f=u._,v=function(b){this._wrapped=b},g=typeof StopIteration!=="undefined"?StopIteration:"__break__",w=u._=function(b){return new v(b)};if(typeof exports!=="undefined"){exports._=w}var t=Array.prototype.slice,e=Array.prototype.unshift,d=Object.prototype.toString,c=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;w.VERSION="0.5.5";w.each=function(b,n,m){try{if(b.forEach){b.forEach(n,m)}else{if(w.isArray(b)||w.isArguments(b)){for(var l=0,k=b.length;l<k;l++){n.call(m,b[l],l,b)}}else{var j=w.keys(b);k=j.length;for(l=0;l<k;l++){n.call(m,b[j[l]],j[l],b)}}}}catch(i){if(i!=g){throw i}}return b};w.map=function(b,k,j){if(b&&w.isFunction(b.map)){return b.map(k,j)}var i=[];w.each(b,function(n,m,l){i.push(k.call(j,n,m,l))});return i};w.reduce=function(b,k,j,i){if(b&&w.isFunction(b.reduce)){return b.reduce(w.bind(j,i),k)}w.each(b,function(n,m,l){k=j.call(i,k,n,m,l)});return k};w.reduceRight=function(b,l,k,j){if(b&&w.isFunction(b.reduceRight)){return b.reduceRight(w.bind(k,j),l)}var i=w.clone(w.toArray(b)).reverse();w.each(i,function(n,m){l=k.call(j,l,n,m,b)});return l};w.detect=function(b,k,j){var i;w.each(b,function(n,m,l){if(k.call(j,n,m,l)){i=n;w.breakLoop()}});return i};w.select=function(b,k,j){if(b&&w.isFunction(b.filter)){return b.filter(k,j)}var i=[];w.each(b,function(n,m,l){k.call(j,n,m,l)&&i.push(n)});return i};w.reject=function(b,k,j){var i=[];w.each(b,function(n,m,l){!k.call(j,n,m,l)&&i.push(n)});return i};w.all=function(b,k,j){k=k||w.identity;if(b&&w.isFunction(b.every)){return b.every(k,j)}var i=true;w.each(b,function(n,m,l){(i=i&&k.call(j,n,m,l))||w.breakLoop()});return i};w.any=function(b,k,j){k=k||w.identity;if(b&&w.isFunction(b.some)){return b.some(k,j)}var i=false;w.each(b,function(n,m,l){if(i=k.call(j,n,m,l)){w.breakLoop()}});return i};w.include=function(b,j){if(w.isArray(b)){return w.indexOf(b,j)!=-1}var i=false;w.each(b,function(k){if(i=k===j){w.breakLoop()}});return i};w.invoke=function(b,j){var i=w.rest(arguments,2);return w.map(b,function(k){return(j?k[j]:k).apply(k,i)})};w.pluck=function(b,i){return w.map(b,function(j){return j[i]})};w.max=function(b,k,j){if(!k&&w.isArray(b)){return Math.max.apply(Math,b)}var i={computed:-Infinity};w.each(b,function(n,m,l){m=k?k.call(j,n,m,l):n;m>=i.computed&&(i={value:n,computed:m})});return i.value};w.min=function(b,k,j){if(!k&&w.isArray(b)){return Math.min.apply(Math,b)}var i={computed:Infinity};w.each(b,function(n,m,l){m=k?k.call(j,n,m,l):n;m<i.computed&&(i={value:n,computed:m})});return i.value};w.sortBy=function(b,j,i){return w.pluck(w.map(b,function(m,l,k){return{value:m,criteria:j.call(i,m,l,k)}}).sort(function(l,k){l=l.criteria;k=k.criteria;return l<k?-1:l>k?1:0}),"value")};w.sortedIndex=function(b,m,l){l=l||w.identity;for(var k=0,j=b.length;k<j;){var i=k+j>>1;l(b[i])<l(m)?(k=i+1):(j=i)}return k};w.toArray=function(b){if(!b){return[]}if(b.toArray){return b.toArray()}if(w.isArray(b)){return b}if(w.isArguments(b)){return t.call(b)}return w.values(b)};w.size=function(b){return w.toArray(b).length};w.first=function(b,j,i){return j&&!i?t.call(b,0,j):b[0]};w.rest=function(b,j,i){return t.call(b,w.isUndefined(j)||i?1:j)};w.last=function(b){return b[b.length-1]};w.compact=function(b){return w.select(b,function(i){return !!i})};w.flatten=function(b){return w.reduce(b,[],function(j,i){if(w.isArray(i)){return j.concat(w.flatten(i))}j.push(i);return j})};w.without=function(b){var i=w.rest(arguments);return w.select(b,function(j){return !w.include(i,j)})};w.uniq=function(b,i){return w.reduce(b,[],function(l,k,j){if(0==j||(i===true?w.last(l)!=k:!w.include(l,k))){l.push(k)}return l})};w.intersect=function(b){var i=w.rest(arguments);return w.select(w.uniq(b),function(j){return w.all(i,function(k){return w.indexOf(k,j)>=0})})};w.zip=function(){for(var b=w.toArray(arguments),k=w.max(w.pluck(b,"length")),j=new Array(k),i=0;i<k;i++){j[i]=w.pluck(b,String(i))}return j};w.indexOf=function(b,k){if(b.indexOf){return b.indexOf(k)}for(var j=0,i=b.length;j<i;j++){if(b[j]===k){return j}}return -1};w.lastIndexOf=function(b,j){if(b.lastIndexOf){return b.lastIndexOf(j)}for(var i=b.length;i--;){if(b[i]===j){return i}}return -1};w.range=function(b,m,l){var k=w.toArray(arguments),j=k.length<=1;b=j?0:k[0];m=j?k[0]:k[1];l=k[2]||1;k=Math.ceil((m-b)/l);if(k<=0){return[]}k=new Array(k);j=b;for(var i=0;1;j+=l){if((l>0?j-m:m-j)>=0){return k}k[i++]=j}};w.bind=function(b,j){var i=w.rest(arguments,2);return function(){return b.apply(j||u,i.concat(w.toArray(arguments)))}};w.bindAll=function(b){var i=w.rest(arguments);if(i.length==0){i=w.functions(b)}w.each(i,function(j){b[j]=w.bind(b[j],b)});return b};w.delay=function(b,j){var i=w.rest(arguments,2);return setTimeout(function(){return b.apply(b,i)},j)};w.defer=function(b){return w.delay.apply(w,[b,1].concat(w.rest(arguments)))};w.wrap=function(b,i){return function(){var j=[b].concat(w.toArray(arguments));return i.apply(i,j)}};w.compose=function(){var b=w.toArray(arguments);return function(){for(var j=w.toArray(arguments),i=b.length-1;i>=0;i--){j=[b[i].apply(this,j)]}return j[0]}};w.keys=function(b){if(w.isArray(b)){return w.range(0,b.length)}var j=[];for(var i in b){c.call(b,i)&&j.push(i)}return j};w.values=function(b){return w.map(b,w.identity)};w.functions=function(b){return w.select(w.keys(b),function(i){return w.isFunction(b[i])}).sort()};w.extend=function(b,j){for(var i in j){b[i]=j[i]}return b};w.clone=function(b){if(w.isArray(b)){return b.slice(0)}return w.extend({},b)};w.tap=function(b,i){i(b);return b};w.isEqual=function(b,l){if(b===l){return true}var k=typeof b;if(k!=typeof l){return false}if(b==l){return true}if(!b&&l||b&&!l){return false}if(b.isEqual){return b.isEqual(l)}if(w.isDate(b)&&w.isDate(l)){return b.getTime()===l.getTime()}if(w.isNaN(b)&&w.isNaN(l)){return true}if(w.isRegExp(b)&&w.isRegExp(l)){return b.source===l.source&&b.global===l.global&&b.ignoreCase===l.ignoreCase&&b.multiline===l.multiline}if(k!=="object"){return false}if(b.length&&b.length!==l.length){return false}k=w.keys(b);var j=w.keys(l);if(k.length!=j.length){return false}for(var i in b){if(!w.isEqual(b[i],l[i])){return false}}return true};w.isEmpty=function(b){return w.keys(b).length==0};w.isElement=function(b){return !!(b&&b.nodeType==1)};w.isArray=function(b){return !!(b&&b.concat&&b.unshift)};w.isArguments=function(b){return b&&w.isNumber(b.length)&&!w.isArray(b)&&!a.call(b,"length")};w.isFunction=function(b){return !!(b&&b.constructor&&b.call&&b.apply)};w.isString=function(b){return !!(b===""||b&&b.charCodeAt&&b.substr)};w.isNumber=function(b){return d.call(b)==="[object Number]"};w.isDate=function(b){return !!(b&&b.getTimezoneOffset&&b.setUTCFullYear)};w.isRegExp=function(b){return !!(b&&b.test&&b.exec&&(b.ignoreCase||b.ignoreCase===false))};w.isNaN=function(b){return w.isNumber(b)&&isNaN(b)};w.isNull=function(b){return b===null};w.isUndefined=function(b){return typeof b=="undefined"};w.noConflict=function(){u._=f;return this};w.identity=function(b){return b};w.breakLoop=function(){throw g};var x=0;w.uniqueId=function(b){var i=x++;return b?b+i:i};w.template=function(b,i){b=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+b.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('")+"');}return p.join('');");return i?b(i):b};w.forEach=w.each;w.foldl=w.inject=w.reduce;w.foldr=w.reduceRight;w.filter=w.select;w.every=w.all;w.some=w.any;w.head=w.first;w.tail=w.rest;w.methods=w.functions;var h=function(b,i){return i?w(b).chain():b};w.each(w.functions(w),function(b){var i=w[b];v.prototype[b]=function(){var j=w.toArray(arguments);e.call(j,this._wrapped);return h(i.apply(w,j),this._chain)}});w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var i=Array.prototype[b];v.prototype[b]=function(){i.apply(this._wrapped,arguments);return h(this._wrapped,this._chain)}});w.each(["concat","join","slice"],function(b){var i=Array.prototype[b];v.prototype[b]=function(){return h(i.apply(this._wrapped,arguments),this._chain)}});v.prototype.chain=function(){this._chain=true;return this};v.prototype.value=function(){return this._wrapped}})();